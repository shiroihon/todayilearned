<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://shiroimon.kithub.f5.si/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/github.min.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/github-style.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/light.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/dark.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/syntax.css' />
    <title>[BigQuery] (Various) Data Transfer - Today I Learned | KitHub</title>
    
    <link rel="icon" type="image/x-icon" href='../../images/github-mark.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <script type="text/javascript" src="https://shiroimon.kithub.f5.si/js/gist-dark-mode.js"></script>

    
    <meta name="description"
  content="🔍 Find out various data transfer methods starting from BigQuery." />
<meta name="keywords"
  content='blog' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://shiroimon.kithub.f5.si/post/bigquery_about_various_data_transfer/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="[BigQuery] (Various) Data Transfer - Today I Learned | KitHub" />
<meta name="twitter:description"
  content="🔍 Find out various data transfer methods starting from BigQuery." />
<meta name="twitter:site" content="https://shiroimon.kithub.f5.si/" />
<meta name="twitter:creator" content="shiro" />
<meta name="twitter:image"
  content="https://shiroimon.kithub.f5.si/">


<meta property="og:type" content="article" />
<meta property="og:title" content="[BigQuery] (Various) Data Transfer - Today I Learned | KitHub">
<meta property="og:description"
  content="🔍 Find out various data transfer methods starting from BigQuery." />
<meta property="og:url" content="https://shiroimon.kithub.f5.si/post/bigquery_about_various_data_transfer/" />
<meta property="og:site_name" content="[BigQuery] (Various) Data Transfer" />
<meta property="og:image"
  content="https://shiroimon.kithub.f5.si/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2025-04-03 11:11:44 &#43;0900 JST" />











</head>


<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://shiroimon.kithub.f5.si/">
        <img class="octicon" height="32" width="32" src="../../images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" id="search-form" action="" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://shiroimon.kithub.f5.si/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="../../images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
<main>
    
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
    <div class="px-0">
    <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
    <div class="flex-auto min-width-0 width-fit mr-3">
    <div class="d-flex">
        
        <div class="d-none d-md-block">
            <a class="avatar mr-2 flex-shrink-0" href="https://shiroimon.kithub.f5.si/">
                <img class=" avatar-user"
                  src="../../images/avatar.png"
                  width="32"
                  height="32">
            </a>
        </div>
        
        <div class="d-flex flex-column">
            
            <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                <span class="author"><a href="https://shiroimon.kithub.f5.si/"></a></span>
                <span class="path-divider">/</span>
                <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px"><a href="https://shiroimon.kithub.f5.si/post/bigquery_about_various_data_transfer/">[BigQuery] (Various) Data Transfer</a></strong>
            </h1>
            
            <div class="note m-0">
                Created <relative-time datetime="Thu, 03 Apr 2025 11:11:44 &#43;0900" class="no-wrap">Thu, 03 Apr 2025 11:11:44 &#43;0900</relative-time>
                
                <span class="path-divider">|</span>
                Modified <relative-time datetime="Sat, 27 Sep 2025 18:57:13 &#43;0900" class="no-wrap">Sat, 27 Sep 2025 18:57:13 &#43;0900</relative-time>
                
            </div>
        </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    
    <div class="container-lg px-3 new-discussion-timeline">
    <div class="repository-content gist-content">
    <div>
        <div class="js-gist-file-update-container js-task-list-container file-box">
        <div id="file-pytest" class="file my-2">
        
        <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
        <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
            
            <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
            <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                <svg aria-hidden="true" viewBox="0 0 16 16" class="octicon octicon-list-unordered" height="16" width="16">
                    <path fill-rule="evenodd"
                        d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z">
                    </path>
                </svg>
            </summary>
            <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                    <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list"></div>
                </div>
            </details-menu>
            4033 Words
            <span class="path-divider">|</span>
            5 min
            </div>

            
            <div class="file-actions flex-order-2 pt-0">
                
                <div class="d-none d-md-flex">
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/bigquery">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        BigQuery
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/google-cloud">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        Google Cloud
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/etl/elt">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        ETL/ELT
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/sql">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        SQL
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/dbt">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        dbt
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/dwh">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        DWH
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/datalake">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        DataLake
                    </a>
                    
                    
                    
                </div>
                
            </div>
        </div>
        </div>

        
        <div class="Box-body px-5 pb-5" style="z-index: 1">
            <article class="markdown-body entry-content container-lg"><!-- Icon Badge -->
<p><img src="https://img.shields.io/badge/-Cloud%20Composer-669DF6.svg?logo=googlecloudcomposer&amp;style=flat&amp;color=F0F8FF" alt="Composer"><!-- ![Functions](https://img.shields.io/badge/-Cloud%20Functions-669DF6.svg?logo=googlecloudfunctions&style=flat&color=F0F8FF) --><!-- ![Run](https://img.shields.io/badge/-Cloud%20Run-669DF6.svg?logo=googlecloudrun&style=flat&color=F0F8FF) -->
<img src="https://img.shields.io/badge/-Dataflow-669DF6.svg?logo=googledataflow&amp;style=flat&amp;color=F0F8FF" alt="Dataflow">
<img src="https://img.shields.io/badge/-Dataproc-669DF6.svg?logo=googledataproc&amp;style=flat&amp;color=F0F8FF" alt="Dataproc">
<img src="https://img.shields.io/badge/-Cloud%20Spanner-669DF6.svg?logo=googlecloudspanner&amp;style=flat&amp;color=F0F8FF" alt="Spanner">
<img src="https://img.shields.io/badge/-Cloud%20Storage-669DF6.svg?logo=googlecloudstorage&amp;style=flat&amp;color=F0F8FF" alt="Storage">
<img src="https://img.shields.io/badge/-BigQuery-669DF6.svg?logo=googlebigquery&amp;style=flat&amp;color=F0F8FF" alt="BigQuery"> <!-- ![Dataform](https://img.shields.io/badge/-Dataform-669DF6.svg?logo=googledataform&style=flat&color=F0F8FF) --></p>
<!-- Image -->
<!-- ![BigQuery](https://cdn-ssl-devio-img.classmethod.jp/wp-content/uploads/2020/09/gcp-eyecatch-bigquery_1200x630.png) -->
<h2 id="why">Why<a class="anchor" aria-hidden="true" href="#why"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># ---------------------------------------------------------------------------------------
</span></span><span class="line"><span class="cl"># ETL/ELT pipeline
</span></span><span class="line"><span class="cl"># ---------------------------------------------------------------------------------------
</span></span><span class="line"><span class="cl"> Orchestration
</span></span><span class="line"><span class="cl"> [Cloud Composer(Airflow)]
</span></span><span class="line"><span class="cl"> [Kestra]
</span></span><span class="line"><span class="cl"> [Argo Workflows(Kubernetesネイティブなワークフローエンジン)]
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"> DataSource                        DataLake                 DWH                   DataMart
</span></span><span class="line"><span class="cl"> [DataSource] ---*---------------&gt; [GCS] ---*-------------&gt; [BQ] ---*-----------&gt; [BQ]
</span></span><span class="line"><span class="cl"> └(API)          [Trocco(Embluk)]           [Dataflow]              [Dataform]
</span></span><span class="line"><span class="cl"> └(CloudLogging) [DataProc(Spark)]          [Argo Workflows]        [dbt]
</span></span><span class="line"><span class="cl"> └(GA4)          [Cloud Functions]          └バッチをKubernetes上の場合
</span></span><span class="line"><span class="cl"> └...etc.        [Cloud Run                 ]
</span></span></code></pre></div><ul>
<li><details>
  <summary>(大規模)データ分析パイプライン:</summary>
  <p></p>
  <p>パイプライン構成とフロー：</p>
<ol>
<li><code>Cloud Scheduler</code> で日次トリガー</li>
<li><code>Cloud Composer</code> がワークフロー開始</li>
<li><code>Cloud Run</code> で前処理（データ検証、分割）</li>
<li><code>Dataproc</code> でSparkジョブ実行（メイン処理）</li>
<li><code>Cloud Functions</code> で処理完了通知</li>
<li><code>BigQuery</code> に結果ロード</li>
</ol>
<p>この構成は各サービスの強みを活かしながら、</p>
<ul>
<li>コスト効率の良いパイプラインを構築</li>
<li>Dataprocは一時クラスタを使用することで、大規模処理が必要な時だけリソースを消費するように設計</li>
</ul>
<p>コスト比較の目安：</p>
<table>
  <thead>
      <tr>
          <th>サービス</th>
          <th>コスト特性</th>
          <th>適したワークロード</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Cloud Functions</td>
          <td>実行時間とメモリ使用量に比例</td>
          <td>軽量で頻度の高いイベント処理</td>
      </tr>
      <tr>
          <td>Cloud Run</td>
          <td>リクエスト数とCPU使用時間</td>
          <td>中規模HTTPサービス/バッチ</td>
      </tr>
      <tr>
          <td>Dataproc</td>
          <td>クラスタ規模と実行時間</td>
          <td>大規模データ(TB～PB級)処理バッチ</td>
      </tr>
      <tr>
          <td>Cloud Composer</td>
          <td>固定費+環境規模</td>
          <td>ワークフローオーケストレーション</td>
      </tr>
  </tbody>
</table>
<p>Composer + Cloud Run + Dataproc：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py" data-lang="py"><span class="line"><span class="cl"><span class="c1"># Cloud ComposerでのDataprocオペレーター使用例</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">airflow.providers.google.cloud.operators.dataproc</span> <span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="n">DataprocCreateClusterOperator</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">DataprocSubmitJobOperator</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">DataprocDeleteClusterOperator</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">with</span> <span class="n">models</span><span class="o">.</span><span class="n">DAG</span><span class="p">(</span><span class="s1">&#39;data_pipeline&#39;</span><span class="p">,</span> <span class="n">schedule_interval</span><span class="o">=</span><span class="s1">&#39;@daily&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">dag</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">create_cluster</span> <span class="o">=</span> <span class="n">DataprocCreateClusterOperator</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">task_id</span><span class="o">=</span><span class="s2">&#34;create_cluster&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">project_id</span><span class="o">=</span><span class="s2">&#34;your-project&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">cluster_name</span><span class="o">=</span><span class="s2">&#34;ephemeral-spark-cluster&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">region</span><span class="o">=</span><span class="s2">&#34;us-central1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">cluster_config</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;master_config&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;num_instances&#34;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&#34;machine_type_uri&#34;</span><span class="p">:</span> <span class="s2">&#34;n1-standard-4&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;worker_config&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;num_instances&#34;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&#34;machine_type_uri&#34;</span><span class="p">:</span> <span class="s2">&#34;n1-standard-4&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1"># 重いデータ処理はDataprocに委譲</span>
</span></span><span class="line"><span class="cl">    <span class="n">spark_job</span> <span class="o">=</span> <span class="n">DataprocSubmitJobOperator</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">task_id</span><span class="o">=</span><span class="s2">&#34;run_spark_job&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">job</span><span class="o">=</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;reference&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;project_id&#34;</span><span class="p">:</span> <span class="s2">&#34;your-project&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;placement&#34;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&#34;cluster_name&#34;</span><span class="p">:</span> <span class="s2">&#34;ephemeral-spark-cluster&#34;</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;spark_job&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;jar_file_uris&#34;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&#34;gs://your-bucket/your-spark-job.jar&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;main_class&#34;</span><span class="p">:</span> <span class="s2">&#34;com.example.Main&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">delete_cluster</span> <span class="o">=</span> <span class="n">DataprocDeleteClusterOperator</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">task_id</span><span class="o">=</span><span class="s2">&#34;delete_cluster&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">project_id</span><span class="o">=</span><span class="s2">&#34;your-project&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">cluster_name</span><span class="o">=</span><span class="s2">&#34;ephemeral-spark-cluster&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">region</span><span class="o">=</span><span class="s2">&#34;us-central1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">trigger_rule</span><span class="o">=</span><span class="s2">&#34;all_done&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">create_cluster</span> <span class="o">&gt;&gt;</span> <span class="n">spark_job</span> <span class="o">&gt;&gt;</span> <span class="n">delete_cluster</span>
</span></span></code></pre></div>
  <p></p>
</details>
</li>
</ul>
<h2 id="what">What<a class="anchor" aria-hidden="true" href="#what"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h2>
<h3 id="cloud-composerairflow-でのデータ転送">[Cloud Composer(Airflow)] でのデータ転送<a class="anchor" aria-hidden="true" href="#cloud-composerairflow-でのデータ転送"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h3>
<blockquote>
<p>[!NOTE]</p>
<pre tabindex="0"><code>DWH（BigQuery）への定期的なデータロードができて、
「データ処理の自動化・スケジューリング・監視」 をコードベースで管理できるのが特徴！
</code></pre><ul>
<li>ワークフローの自動化
<ul>
<li>-&gt; <code>e.g</code> 「毎日深夜にBigQueryからデータを抽出 → 変換 → 別のテーブルにロード」といった処理を自動化</li>
</ul>
</li>
<li>タスク依存関係の管理
<ul>
<li>-&gt; 「Aの次にB実行」などをコードで記述でき、失敗やリトライも自動処理可能</li>
</ul>
</li>
<li>マネージドサービスとしての利点
<ul>
<li>-&gt; Airflow のインフラ（Webサーバー、スケジューラ、ワーカーなど）を Google Cloud が自動で構築・管理</li>
</ul>
</li>
<li>Google Cloud とのネイティブ連携
<ul>
<li>-&gt; BigQuery、Dataflow、Cloud Storage、Pub/Sub など GCP サービスと簡単に連携可能</li>
</ul>
</li>
<li>監視とロギング
<ul>
<li>-&gt; 実行ログやタスクの状態は Cloud Logging / Monitoring と連携 され、可視化やアラート設定が容易</li>
</ul>
</li>
</ul></blockquote>
<p>Cloud Composer (Airflow) でのCloud Runオペレーター使用例</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-py:dag_sample.py" data-lang="py:dag_sample.py"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">airflow</span> <span class="kn">import</span> <span class="n">models</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">airflow.providers.google.cloud.operators.cloud_run</span> <span class="kn">import</span> <span class="n">CloudRunExecuteJobOperator</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">with</span> <span class="n">models</span><span class="o">.</span><span class="n">DAG</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;cloudrun_pipeline&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="n">schedule_interval</span><span class="o">=</span><span class="s1">&#39;@daily&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span> <span class="k">as</span> <span class="n">dag</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">process_data</span> <span class="o">=</span> <span class="n">CloudRunExecuteJobOperator</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">task_id</span><span class="o">=</span><span class="s1">&#39;process_data&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">project_id</span><span class="o">=</span><span class="s1">&#39;your-project&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">region</span><span class="o">=</span><span class="s1">&#39;us-central1&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">job_name</span><span class="o">=</span><span class="s1">&#39;data-processor&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">dag</span><span class="o">=</span><span class="n">dag</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">send_report</span> <span class="o">=</span> <span class="n">CloudRunExecuteJobOperator</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="n">task_id</span><span class="o">=</span><span class="s1">&#39;send_report&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">project_id</span><span class="o">=</span><span class="s1">&#39;your-project&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">region</span><span class="o">=</span><span class="s1">&#39;us-central1&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">job_name</span><span class="o">=</span><span class="s1">&#39;report-sender&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">dag</span><span class="o">=</span><span class="n">dag</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">process_data</span> <span class="o">&gt;&gt;</span> <span class="n">send_report</span>
</span></span></code></pre></div><p>Ref.</p>
<ul>
<li><a href="https://cloud.google.com/composer/docs/concepts/overview?hl=ja">Cloud Composer の概要</a> Googel Cloud
<ul>
<li><a href="https://cloud.google.com/composer/docs/data-analytics-googlecloud?hl=ja#data_analytics_dag">Google Cloud でデータ分析 DAG を実行する</a></li>
<li><a href="https://cloud.google.com/composer/docs/how-to/accessing/airflow-cli?hl=ja">Airflow コマンドライン インターフェースにアクセスする</a></li>
<li>src: <a href="https://airflow.apache.org/docs/apache-airflow/stable/_modules/airflow/models/xcom.html">Source code for airflow.models.xcom</a> Apache Airflow</li>
</ul>
</li>
<li><a href="https://buildersbox.corp-sansan.com/entry/2022/08/18/110000">【R&amp;D DevOps通信】Cloud ComposerのDAGでデータ基盤の転送パイプラインを監視</a> Sansan</li>
<li><a href="https://techblog.zozo.com/entry/composer-migration">Cloud Composerにデータマート集計基盤を移行しました</a> zozo</li>
</ul>
<h3 id="dataflow-でのデータ転送">[Dataflow] でのデータ転送<a class="anchor" aria-hidden="true" href="#dataflow-でのデータ転送"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">DataLake               DWH
</span></span><span class="line"><span class="cl">[GCS] ---*-----------&gt; [BQ]
</span></span><span class="line"><span class="cl">         [Dataflow]
</span></span></code></pre></div><p>Ref.</p>
<ul>
<li><a href="https://zenn.dev/pharmax/articles/932d7095313387">分析用ログをCloud Storageにアップロードして、Dataflow経由でBigQueryへ格納する</a> Zenn</li>
<li><a href="https://zenn.dev/pharmax/articles/f60e0d857f2be2">[GCP入門] Cloud LoggingのログをCloud Storageへ転送する</a> Zenn</li>
</ul>
<h3 id="dataform-でのデータ転送">[Dataform] でのデータ転送<a class="anchor" aria-hidden="true" href="#dataform-でのデータ転送"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">DWH                   DataMart
</span></span><span class="line"><span class="cl">[BQ] ---*-----------&gt; [BQ]
</span></span><span class="line"><span class="cl">        [Dataform]
</span></span></code></pre></div><ul>
<li>
<p>Dataform の概要</p>
<blockquote>
<p>SQL を使用して BigQuery でスケーラブルなデータ変換パイプラインを開発、運用します。</p>
<pre tabindex="0"><code>☑️ BigQuery で、キュレートされた最新の信頼できる文書化されたテーブルを開発する
☑️ データ アナリストとデータ エンジニアが同じリポジトリでコラボレーションできるようにする
☑️ SQL を使用して BigQuery でスケーラブルなデータ パイプラインを構築する
☑️ GitHub および GitLab と統合する
☑️ インフラストラクチャの管理を必要とせずにテーブルを最新の状態に保つ
</code></pre><ul>
<li>
<p>&ldquo;<a href="https://cloud.google.com/dataform?hl=ja">Dataform</a>&rdquo; Google Cloud</p>
</li>
<li>
<p><a href="https://cloud.google.com/dataform/docs/overview?hl=ja">Dataform の概要</a> Google Cloud</p>
</li>
<li>
<p>2020年8月 に Google Cloud に買収され、Google Cloud コンソールにも統合。<a href="https://cloud.google.com/blog/ja/products/data-analytics/welcoming-dataform-to-bigquery?hl=ja">ref</a></p>
</li>
<li>
<details>
  <summary>Overview Pipline</summary>
  <p></p>
  <p><img src="https://storage.googleapis.com/zenn-user-upload/4435acee1448-20231220.png" alt="img"></p>
<ul>
<li><a href="https://zenn.dev/google_cloud_jp/articles/dc3bf03da6a0f3">BigQuery 向けデータパイプラインサービス「Dataform」の基本的な使い方</a> Zenn</li>
</ul>
  <p></p>
</details>

</li>
<li>
<details>
  <summary>Overview SQLX</summary>
  <p></p>
  <p><img src="https://cdn-ak.f.st-hatena.com/images/fotolife/g/ggen-sugimura/20230509/20230509163008.png" alt="img"></p>
<ul>
<li><a href="https://blog.g-gen.co.jp/entry/dataform-explained">Dataformを徹底解説</a> Ggen</li>
</ul>
  <p></p>
</details>

</li>
</ul></blockquote>
</li>
<li>
<p><a href="https://cloud.google.com/dataform/docs/dataform-core?hl=ja">Dataform コアの概要</a>

    
    <div>
        <div class="github-card" data-github="dataform-co/dataform" data-theme="default"></div>
        <script src="https://cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
    </div>
    
</p>
  <!-- https://github.com/dataform-co/dataform -->
<ul>
<li>Dataform は DataformCore 由来で、DatafromCore は以下より構成</li>
</ul>
<pre tabindex="0"><code>---
Dataform core = SQLX + JavaScript
---
Dataform core = オープンソースのメタ言語-&gt; Dataform での SQL ワークフロー開発に利用
SQLX          = オープンソースの、SQL の拡張言語
JavaScript    = SQLX ファイルの中にブロック記述-&gt; 再利用可能な関数を定義可能
</code></pre></li>
</ul>
<p>SQLX
JSON part</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/* JSON: config part */</span>
</span></span><span class="line"><span class="cl"><span class="nx">config</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">type</span><span class="o">:</span> <span class="s2">&#34;incremental&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">schema</span> <span class="o">:</span> <span class="s2">&#34;reporting&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;service_log_install&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">tags</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;service&#34;</span><span class="p">,</span> <span class="s2">&#34;log&#34;</span><span class="p">,</span> <span class="s2">&#34;sercice_log&#34;</span><span class="p">,</span> <span class="s2">&#34;daily&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span><span class="o">:</span> <span class="s2">&#34;製品のインストールログテーブル&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">columns</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">user_id</span><span class="o">:</span> <span class="nx">docs</span><span class="p">.</span><span class="nx">user_id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">installed_at_jst</span><span class="o">:</span> <span class="nx">docs</span><span class="p">.</span><span class="nx">installed_at_jst</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">tracking_key</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">device_id</span><span class="o">:</span> <span class="s2">&#34;デバイスID&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ip_address</span><span class="o">:</span> <span class="s2">&#34;IPアドレス&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">user_agent</span><span class="o">:</span> <span class="s2">&#34;ユーザエージェント&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">os_name</span><span class="o">:</span> <span class="nx">docs</span><span class="p">.</span><span class="nx">os_name</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">country_cd</span><span class="o">:</span> <span class="nx">docs</span><span class="p">.</span><span class="nx">country_cd</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">subregion_key</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">language_key</span><span class="o">:</span> <span class="s2">&#34;&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">region</span><span class="o">:</span> <span class="nx">docs</span><span class="p">.</span><span class="nx">region_jp_ww_kr</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">uniqueKey</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;user_id&#34;</span><span class="p">,</span> <span class="s2">&#34;region&#34;</span><span class="p">,</span> <span class="s2">&#34;installed_at_jst&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">bigquery</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">partitionBy</span><span class="o">:</span> <span class="s2">&#34;DATE_TRUNC(installed_at_jst,MONTH)&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clusterBy</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;region&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">updatePartitionFilter</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="sb">`installed_at_jst &gt;= DATETIME(DATE_SUB(</span><span class="si">${</span><span class="nx">constants</span><span class="p">.</span><span class="nx">start_date</span><span class="si">}</span><span class="sb">, INTERVAL 1 DAY))`</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">assertions</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">uniqueKey</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;user_id&#34;</span><span class="p">,</span> <span class="s2">&#34;region&#34;</span><span class="p">,</span> <span class="s2">&#34;installed_at_jst&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><details>
  <summary>key/value 詳細</summary>
  <p></p>
  <blockquote>
<table>
  <thead>
      <tr>
          <th style="text-align: left">key</th>
          <th style="text-align: left">values</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>type</code></td>
          <td style="text-align: left"><code>table</code>:再作成<br> <code>incremental</code>: 差分更新<br> <code>operations</code>:DMLを記述時（INSERT, UPDATE, DELETE文）<br> <code>declaration</code>:リンク元テーブル定義を書く場合<br> <code>assertions</code>:処理の確認を個別fileで記述</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>schema</code></td>
          <td style="text-align: left">スキーマとは、BigQuery データセットを示している</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>name</code></td>
          <td style="text-align: left">出力先テーブル名（未指定の場合、ファイル名が命名される）</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>tags</code></td>
          <td style="text-align: left">dataformの実行単位としてここに書かれたtag単位で実行ができる（e.g. <code>daily</code>, <code>weekly</code>タグは有用）</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>description</code></td>
          <td style="text-align: left">ｽｷｰﾏの説明</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>columns</code></td>
          <td style="text-align: left">ｽｷｰﾏのｶﾗﾑ別説明<br> ※「docs.XXXX」は、<code>includes/docs.js</code>に準備しておくと共通利用ができる</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>uniqueKey</code></td>
          <td style="text-align: left">incremental指定時で、マージ使用するキー<br> ※uniqueになっていないと増分実行時にerror</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>bigquery</code></td>
          <td style="text-align: left">updatePartitionFilter: マージ時の遡及指定ができる</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>assertions</code></td>
          <td style="text-align: left">uniqueKey: ｸｴﾘRun後に一意確認<br>nonNull: ｸｴﾘRun後にNull確認<br> ※テーブルサイズに寄るが処理コストを喰うので原則個別ﾌｧｲﾙにすると吉</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>dependencies</code></td>
          <td style="text-align: left">config ブロックで依存関係を定義	body ブロックの SQL 内で依存関係が定義されてない場合でも依存関係を定義できる</td>
      </tr>
  </tbody>
</table>
<ul>
<li>cf. <a href="https://cloud.google.com/dataform/docs/reference/dataform-core-reference#itableconfig">ITableConfig</a> Google Cloud</li>
</ul></blockquote>

  <p></p>
</details>

<p>JavaScript part</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/* javascript part */</span>
</span></span><span class="line"><span class="cl"><span class="nx">js</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">project</span> <span class="o">=</span> <span class="s2">&#34;your_company_project&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">dataset</span> <span class="o">=</span> <span class="s2">&#34;example_user_analysis&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">table</span> <span class="o">=</span> <span class="s2">&#34;sample_admin_salse&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">select</span> <span class="o">*</span>
</span></span><span class="line"><span class="cl"><span class="nx">from</span>
</span></span><span class="line"><span class="cl">    <span class="nx">$</span><span class="p">{</span><span class="nx">project</span><span class="p">}.</span><span class="nx">$</span><span class="p">{</span><span class="nx">dataset</span><span class="p">}.</span><span class="nx">sample_admin_access</span> <span class="nx">a</span>
</span></span><span class="line"><span class="cl">    <span class="nx">left</span> <span class="nx">join</span>  <span class="nx">$</span><span class="p">{</span><span class="nx">project</span><span class="p">}.</span><span class="nx">$</span><span class="p">{</span><span class="nx">dataset</span><span class="p">}.</span><span class="nx">$</span><span class="p">{</span><span class="nx">table</span><span class="p">}</span> <span class="nx">b</span> <span class="nx">using</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">user_id</span><span class="p">)</span>
</span></span></code></pre></div><h4 id="実行順序">実行順序<a class="anchor" aria-hidden="true" href="#実行順序"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl">DWH                           DataMart
</span></span><span class="line"><span class="cl">[BigQuery] -&gt; [1.Dataform]
</span></span><span class="line"><span class="cl">              [2.Dataform]
</span></span><span class="line"><span class="cl">              [3.Dataform]
</span></span><span class="line"><span class="cl">              [4.Dataform] -&gt; [BigQuery]
</span></span></code></pre></div><p>Google BigQuery Dataform はデフォルトで依存関係に基づいて <strong>自動的</strong> に実行順序が決定される<br>
しかし、残念ながら明示的に順次実行を制御することは直接的な方法ではできない&hellip;<br>
そこで、間接的な方法をまとめていく<br>
※　DataformはDAG(有向非巡回グラフ)で実行順序を管理するため、循環依存があるとエラーになる</p>
<ol>
<li>間接方法：タグ/カスタムロジック利用
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="err">コンフィグ内のタグを上手く利用</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- config { tags: [&#34;phase1&#34;] } (Master)
</span></span></span><span class="line"><span class="cl"><span class="c1">-- config { tags: [&#34;phase2&#34;], dependencies: [&#34;phase1&#34;] } (A)
</span></span></span><span class="line"><span class="cl"><span class="c1">-- config { tags: [&#34;phase3&#34;], dependencies: [&#34;phase2&#34;] } (C)
</span></span></span><span class="line"><span class="cl"><span class="c1">-- config { tags: [&#34;phase4&#34;], dependencies: [&#34;phase3&#34;] } (B)
</span></span></span></code></pre></div></li>
<li>間接方法：CLI利用]
<a href="#dag">後述</a></li>
</ol>
<h4 id="dataform-cli">DataForm CLI<a class="anchor" aria-hidden="true" href="#dataform-cli"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h4>
<ul>
<li>準備
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># setup NodeJS</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cf. https://nodejs.org/en/download/</span>
</span></span><span class="line"><span class="cl">$ brew install node@22
</span></span><span class="line"><span class="cl">node@22 is keg-only, which means it was not symlinked into /opt/homebrew,
</span></span><span class="line"><span class="cl">because this is an alternate version of another formulyia.
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">If you need to have node@22 first in your PATH, run:
</span></span><span class="line"><span class="cl">  <span class="nb">echo</span> <span class="s1">&#39;export PATH=&#34;/opt/homebrew/opt/node@22/bin:$PATH&#34;&#39;</span> &gt;&gt; ~/.zshrc
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">For compilers to find node@22 you may need to set:
</span></span><span class="line"><span class="cl">  <span class="nb">export</span> <span class="nv">LDFLAGS</span><span class="o">=</span><span class="s2">&#34;-L/opt/homebrew/opt/node@22/lib&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="nb">export</span> <span class="nv">CPPFLAGS</span><span class="o">=</span><span class="s2">&#34;-I/opt/homebrew/opt/node@22/include&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">$ node -v<span class="p">;</span> npm -v
</span></span><span class="line"><span class="cl">v22.14.0
</span></span><span class="line"><span class="cl">10.9.2
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># setup Dataform CLI</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cf. https://cloud.google.com/dataform/docs/use-dataform-cli</span>
</span></span><span class="line"><span class="cl">$ npm i -g @dataform/cli@^3.0.0-beta
</span></span><span class="line"><span class="cl">$ npm install -g @dataform/cli
</span></span></code></pre></div><ul>
<li>cf. <a href="https://cloud.google.com/dataform/docs/use-dataform-cli?hl=ja">オープンソースの Dataform CLI を使用する</a> Google Cloud</li>
</ul>
</li>
<li>実行
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># </span>
</span></span><span class="line"><span class="cl">$ dataform run
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 変換ワークフローのコンパイルを行う。テーブルの依存関係などをチェック。</span>
</span></span><span class="line"><span class="cl">$ dataform compile
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 変換ワークフローのコンパイルとテストを行う。テストが定義されている場合はテストも実行</span>
</span></span><span class="line"><span class="cl">$ dataform <span class="nb">test</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># DataForm CLI プロジェクトをリモートリポジトリなどから取得した場合に、依存関係 (NPM) のインストールを行う。</span>
</span></span><span class="line"><span class="cl">$ dataform install
</span></span></code></pre></div><ul>
<li>cf. <a href="https://cloud.google.com/dataform/docs/reference/dataform-cli-reference?hl=ja">Dataform CLI のリファレンス</a> Google Cloud</li>
</ul>
</li>
<li><a id="#dag">DAG</a>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># CLI を用いて実行順序を手動実行</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl"><span class="c1"># Master-&gt;A-&gt;C-&gt;B</span>
</span></span><span class="line"><span class="cl"><span class="c1">#</span>
</span></span><span class="line"><span class="cl">$ dataform run --tags Master
</span></span><span class="line"><span class="cl">$ dataform run --tags A --actions Maste
</span></span><span class="line"><span class="cl">$ dataform run --tags C --actions A
</span></span><span class="line"><span class="cl">$ dataform run --tags B --actions C
</span></span></code></pre></div><ul>
<li>順次実行が必要な場合は、<code>run --full-refresh</code> で1つずつ実行</li>
<li>若しくは、<code>Airflow</code> など外部ｵｰｹｽﾄﾚｰｼｮﾝﾂｰﾙと連携する必要がある</li>
</ul>
</li>
<li>DEBUG

    
    <div>
        <div class="github-card" data-github="hiracky16/dataform-osmosis" data-theme="default"></div>
        <script src="https://cdn.jsdelivr.net/github-cards/latest/widget.js"></script>
    </div>
    

  <!-- https://github.com/hiracky16/dataform-osmosis -->
<ul>
<li>cf. <a href="https://zenn.dev/hiracky16/articles/517eaa998e41bfe8152a">dataform-osmosis で Dataform の SQLX ファイルを簡単リファクタリング！</a> Zenn</li>
</ul>
</li>
</ul>
<p>cf.</p>
<ul>
<li><a href="https://dev.hq-hq.co.jp/articles/using-dataform-cli">Dataform CLI で CUI から BigQuery のクエリを管理する</a> HQ</li>
<li><a href="https://book.st-hakky.com/data-platform/dataform-intro/">Google Cloud のデータ変換サービス DataForm 入門</a> Hakky Handbook</li>
</ul>
<h4 id="vsdbt">vs「dbt」<a class="anchor" aria-hidden="true" href="#vsdbt"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h4>
<details>
  <summary>ETLの「T層」に特化したサービス!最近流行りの「dbt」とのメリデメ</summary>
  <p></p>
  <table>
  <thead>
      <tr>
          <th>\</th>
          <th>Dataform の<br> メリット</th>
          <th>Dataform の<br> デメリット</th>
          <th>dbt の<br> メリット</th>
          <th>dbt の<br> デメリット</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><strong>統合環境</strong></td>
          <td>Google Cloud とネイティブ連携（BigQuery, Cloud Storage&hellip;etc）</td>
          <td>Google Cloud 以外の環境では制約がある</td>
          <td>マルチクラウド・オンプレ対応可能（BigQuery, Snowflake, Redshift &hellip;etc.）</td>
          <td>完全なマネージドサービスではないため、自前で環境構築が必要な場合あり</td>
      </tr>
      <tr>
          <td><strong>UI/操作性</strong></td>
          <td>WebベースのGUIが提供されており、SQL開発が直感的</td>
          <td>カスタマイズ性が低く、CLIツールが限定的</td>
          <td>dbt Cloud はGUIを提供、dbt Core はCLIベースで柔軟性が高い</td>
          <td>dbt Core は学習コストがやや高い（YAML, Jinja テンプレートなど）</td>
      </tr>
      <tr>
          <td><strong>拡張性</strong></td>
          <td>JavaScript を使ってカスタムロジックを記述可能</td>
          <td>コミュニティやサードパーティ製パッケージが少ない</td>
          <td>大規模なコミュニティと豊富なパッケージ（dbt Hub）</td>
          <td>複雑な設定が必要な場合がある</td>
      </tr>
      <tr>
          <td><strong>テスト＆ドキュメント</strong></td>
          <td>テスト機能と自動ドキュメント生成をサポート</td>
          <td>dbt ほど成熟したテストフレームワークではない</td>
          <td>高度なデータテスト（unique, not_null, relationships など）とドキュメント自動化</td>
          <td>ドキュメント生成には追加設定が必要な場合がある</td>
      </tr>
      <tr>
          <td><strong>スケジューリング</strong></td>
          <td>Google Cloud Scheduler や Workflows と連携可能</td>
          <td>外部ツール（eg. Airflow）との連携が弱い</td>
          <td>dbt Cloud はスケジューリング機能内蔵、dbt Core はAirflowなどと連携可能</td>
          <td>dbt Core の場合、別途オーケストレーションツールが必要</td>
      </tr>
      <tr>
          <td><strong>コスト</strong></td>
          <td>Google Cloud の利用料に含まれる場合があり、コスト管理が容易</td>
          <td>大規模なプロジェクトでは課金が高くなる可能性</td>
          <td>オープンソース（dbt Core）は無料、dbt Cloud は従量課金</td>
          <td>dbt Cloud は利用量に応じてコストが増加する可能性&hellip;</td>
      </tr>
      <tr>
          <td><strong>学習リソース</strong></td>
          <td>Google のドキュメントが充実</td>
          <td>日本語含むコミュニティが小さい</td>
          <td>豊富なチュートリアル、ブログ、動画（日本語リソースも増加中）</td>
          <td>初心者にはややとっつきにくい</td>
      </tr>
  </tbody>
</table>
<p>Ref.</p>
<ul>
<li><a href="https://book.st-hakky.com/data-platform/dataform-about-sqlx/">DataForm で変換ワークフローを定義する SQLX を徹底解説</a> Hakky Handbook</li>
<li><a href="https://zenn.dev/google_cloud_jp/articles/dc3bf03da6a0f3">BigQuery 向けデータパイプラインサービス「Dataform」の基本的な使い方</a> Zenn</li>
<li><a href="https://blog.g-gen.co.jp/entry/dataform-explained">Dataformを徹底解説</a> Ggen</li>
<li><a href="https://qiita.com/kccs_hiromi-nishida/items/28be115f44c16fb077a4">Dataformって何？便利そうだし調べてみた！（前編）</a> Qiita</li>
<li><a href="https://tech.asahi.co.jp/posts/20240523-1eb8">DataformとGitHubリポジトリをSSH接続する手順とハマったところ</a> ABC</li>
<li><a href="https://cloud.google.com/dataform/docs/connect-repository?hl=ja#github">サードパーティの Git リポジトリに接続する</a> Google Cloud</li>
<li><a href="https://dev.classmethod.jp/articles/try-dataform-connect-third-party-git-repository/">DataformのサードパーティーGitリポジトリ接続機能を試してみた</a> DevelopersIO</li>
<li><a href="https://qiita.com/shuntaro_tamura/items/5a92c517a7d95d655505">非エンジニアのためのJSON入門</a> Qiita</li>
</ul>
  <p></p>
</details>

<h3 id="dataprocspark">[DataProc(Spark)]<a class="anchor" aria-hidden="true" href="#dataprocspark"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h3>
<p>Ref.</p>
<ul>
<li><a href="https://numb86-tech.hatenablog.com/entry/2025/01/30/181809">Dataproc クラスタで PySpark ジョブを実行して学ぶサービスアカウントの初歩</a></li>
<li><a href=""></a></li>
</ul>
</article>
        </div>
        </div>
        </div>
    </div>
        
        
        
        <div class="Box mt-3 position-relative">
        <div class="Box-body px-5 pb-5">
            <article class="markdown-body entry-content container-lg">
                <h2>See Also</h2>
                <ul class="mt-2">
                    
                    <li class="p-1">
                        <div>
                            <a href="../../post/bigquery_data_analysis_catchup/">[BigQuery] Data analyize catchup</a>
                            <time datetime="2024-10-26 00:22" class="no-wrap text-small ml-1">(2024-10-26 00:22)</time>
                        </div>
                        <div class="text-small text-gray mb-1 mt-1">Re-summarizeing the trajectory I learned as an introductory.</div>
                    </li>
                    
                    <li class="p-1">
                        <div>
                            <a href="../../post/bigquery_about_data_quality/">[BigQuery] Data Quality</a>
                            <time datetime="2024-10-16 13:49" class="no-wrap text-small ml-1">(2024-10-16 13:49)</time>
                        </div>
                        <div class="text-small text-gray mb-1 mt-1">Different perspective from data analysis. About data quality.</div>
                    </li>
                    
                    <li class="p-1">
                        <div>
                            <a href="../../post/dbt_seeking_basic_understanding/">[dbt] Seeking out basic understanding</a>
                            <time datetime="2024-07-30 02:30" class="no-wrap text-small ml-1">(2024-07-30 02:30)</time>
                        </div>
                        <div class="text-small text-gray mb-1 mt-1">Wanna deepen my understanding by using my hands and referring to reference books.</div>
                    </li>
                    
                    <li class="p-1">
                        <div>
                            <a href="../../post/bigquery_about_information_schema/">[BigQuery] INFORMATION_SCHEMA</a>
                            <time datetime="2025-03-06 17:39" class="no-wrap text-small ml-1">(2025-03-06 17:39)</time>
                        </div>
                        <div class="text-small text-gray mb-1 mt-1">It&#39;s not good to know about data governance.</div>
                    </li>
                    
                    <li class="p-1">
                        <div>
                            <a href="../../post/bigquery_data_analysis_on_preparation/">[BigQuery] Data analysis on preparation</a>
                            <time datetime="2025-03-03 22:23" class="no-wrap text-small ml-1">(2025-03-03 22:23)</time>
                        </div>
                        <div class="text-small text-gray mb-1 mt-1">I would like to prepare for data analysis using GoogleSQL inside BigQuery</div>
                    </li>
                    
                </ul>
            </article>
        </div>
        </div>
        
    </div>
    </div>
</main>
</div>

<script type="application/javascript" src='https://shiroimon.kithub.f5.si/js/toc.js'></script>
<link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/toc.css' />


<script
    src='https://shiroimon.kithub.f5.si/js/syntax-highlight-title.js'
    crossorigin="anonymous"
    type="application/javascript">
</script>
<link rel="stylesheet" href="../../css/syntax-highlight-title.css">







  
<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/gitalk.css'>
<script src='https://shiroimon.kithub.f5.si/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'Ov23li4bh2st9tQoquIu',
    clientSecret: 'a7f9702fcb30947b9359d89046ada17fadbca6b9',
    repo: 'todayilearned',
    owner: 'bnx-hirukawa',
    admin: ['bnx-hirukawa'],
    id: eval("location.pathname"), 
    distractionFreeMode: false 
  });
  (function() {
    gitalk.render('gitalk-container');
  })();
</script>

</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://shiroimon.kithub.f5.si/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
      <li class="mr-3 mr-lg-0">GitHub and the Invertocat logo are trademarks of <a href="https://github.com/">GitHub, Inc.</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>

</body>

<script type="application/javascript" src="https://shiroimon.kithub.f5.si/js/github-style.js"></script>





<script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
<script type="application/javascript" src='https://shiroimon.kithub.f5.si/js/search.js'></script>



</html>